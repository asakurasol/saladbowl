"use strict";angular.module("clientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/saladbowl/:param1",{templateUrl:"views/saladbowl.html",controller:"SaladbowlCtrl",controllerAs:"sb"}).when("/newgame",{templateUrl:"views/newgame.html",controller:"NewgameCtrl"}).when("/games",{templateUrl:"views/games.html",controller:"GamesCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("clientApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("clientApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);var app=angular.module("clientApp");app.factory("stopwatch",["$timeout",function(a){var b={value:60},c=null,d=function(){c=a(function(){0==b.value||(b.value--,d())},1e3)},e=function(){a.cancel(c),c=null},f=function(){e(),b.value=60};return{data:b,start:d,stop:e,reset:f}}]),app.factory("socket",["$rootScope",function(a){var b=io.connect();return{on:function(c,d){b.on(c,function(){var c=arguments;a.$apply(function(){d.apply(b,c)})})},emit:function(c,d,e){b.emit(c,d,function(){var c=arguments;a.$apply(function(){e&&e.apply(b,c)})})}}}]),app.controller("SaladbowlCtrl",["socket","$routeParams",function(a,b){var c=this;this.username;var d=b.param1;this.current="Preparation Round",this.team1Score=0,this.team2Score=0,console.log(d),a.on("connect",function(){a.emit("join",{room:d})}),a.on("joined",function(a){console.log("got msg"+a)}),a.on("login",function(){var b=prompt("What username would you like to use?");a.emit("login",{roomId:d,username:b}),c.username=b}),a.on("serverMessage",function(a){console.log(a)}),a.on("scoreUpdate",function(a){console.log("the scores are "+a),c.team1Score=a.team1,c.team2Score=a.team2}),a.on("roundChange",function(a){console.log(JSON.parse(a)),c.current="Round "+JSON.parse(a).currentRound})}]),app.directive("phraseForm",function(){return{restrict:"E",templateUrl:"phrase-form.html",controller:["$scope","socket",function(a,b){this.content;var c=this;this.submit=function(){b.emit("submissions",c.content),this.content=""}}],controllerAs:"p"}}),app.directive("wordCount",function(){return{restrict:"E",templateUrl:"word-count.html",controller:["socket",function(a){this.count=0;var b=this;a.on("countDown",function(a){console.log(a),b.count=a})}],controllerAs:"c"}}),app.directive("teamTable",function(){return{restrict:"E",templateUrl:"team-table.html",controller:["socket",function(a){this.teams=[];var b=this;a.on("teamUpdate",function(a){console.log(a),b.teams=a})}],controllerAs:"t"}}),app.directive("word",function(){return{restrict:"E",templateUrl:"word-div.html",controller:["stopwatch","socket",function(a,b){var c=this;this.mySW=a,this.word,this.content="This is a content",this.showContent=!1,this.receivedWord=!1,b.on("word",function(a){c.receivedWord=!0,c.word=a,c.content=a.content,c.mySW.reset(),c.mySW.data.value=a.sendTime}),this.response=function(a,b){return{correct:a,switching:b,word:c.word}},this.success=function(){this.word.returnTime=this.mySW.data.value,0==this.mySW.data.value?b.emit("wordResponse",this.response(!0,!0)):b.emit("wordResponse",this.response(!0,!1)),this.reset()},this.fail=function(){this.word.returnTime=this.mySW.data.value,b.emit("wordResponse",this.response(!1,!0)),this.reset()},this.showWord=function(){this.showContent=!0,this.mySW.start()},this.reset=function(){this.receivedWord=!1,this.showContent=!1,this.mySW.stop()}}],controllerAs:"w"}}),angular.module("clientApp").controller("NewgameCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("clientApp").controller("GamesCtrl",["$scope","$http",function(a,b){b.get("/api/games").success(function(b){a.games=b,console.log(b)}).error(function(a){console.log("Error: "+a)}),a.createGame=function(){console.log(a.formData),b.post("/api/games",a.formData).success(function(b){a.formData={},a.games=b,console.log(b)}).error(function(a){console.log("Error: "+a)})},a.deleteGame=function(c){b.delete("/api/games/"+c).success(function(b){a.games=b,console.log(b)}).error(function(a){console.log("Error: "+a)})}}]);